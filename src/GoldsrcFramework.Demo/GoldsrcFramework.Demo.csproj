<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<HalfLifeInstallDir>$(registry:HKEY_CURRENT_USER\Software\Valve\Steam@ModInstallPath)</HalfLifeInstallDir>
		<AllowUnsafeBlocks>true</AllowUnsafeBlocks>
		<GenerateRuntimeConfigurationFiles>true</GenerateRuntimeConfigurationFiles>
	</PropertyGroup>

	<ItemGroup>
		<ProjectReference Include="..\GoldsrcFramework.Engine\GoldsrcFramework.Engine.csproj" />
		<ProjectReference Include="..\GoldsrcFramework\GoldsrcFramework.csproj">
		</ProjectReference>
	</ItemGroup>

	<ItemGroup>
		<None Update="modSettings.json">
			<CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
		</None>
	</ItemGroup>
	<PropertyGroup>
		<IsBuildInDemo>true</IsBuildInDemo>
		<!-- Define LoaderSourceDir for ModPostBuild.targets -->
		<!-- NOTE: Removed explicit LoaderSourceDir setting - let ModPostBuild.targets handle it -->
	</PropertyGroup>

	<!-- Import ModPostBuild.targets for post-build processing -->
	<Import Project="..\targets\ModPostBuild.targets" />

	<!-- Post-build event to copy files to game directory -->
	<Target Name="PostBuildCopyToGame" AfterTargets="ModPostBuild">
		<Message Text="Executing post-build copy to game directory..." Importance="high" />
		<Exec Command="&quot;$(ProjectDir)..\..\post_build_copy.bat&quot; &quot;$(OutDir)&quot;" ContinueOnError="true" IgnoreExitCode="false" />
	</Target>

	<!--<Import Project="..\GoldsrcFramework\bin\$(Configuration)\$(TargetFramework)\GoldsrcFramework.targets" />-->
</Project>
